<div class="menu">
  <img ngSrc="/yo-log-512px.svg"
    width="64"
    height="64"
    alt="LOGO"
    priority />

  <button
    [class.now]="activeRoute === '/' || activeRoute === '/home'"
    [disabled]="activeRoute === '/' || activeRoute === '/home'"
    (click)="go('home')">

    <img ngSrc="/icons/home.svg"
      width="48"
      height="48"
      alt="HOME" />
  </button>

  <button
    [class.now]="activeMenu === 'level'"
    (click)="togglePanel('level')">

    <img ngSrc="/icons/stairs.svg"
      width="48"
      height="48"
      alt="Select Levels" />
  </button>

  <button
    [class.now]="activeMenu === 'column'"
    (click)="togglePanel('column')">

    <img ngSrc="/icons/table_chart.svg"
      width="48"
      height="48"
      alt="Select Columns" />
  </button>

  <button
    [class.now]="activeMenu === 'filter'"
    (click)="togglePanel('filter')">

    <img ngSrc="/icons/app_registration.svg"
      width="48"
      height="48"
      alt="Filter Columns" />
  </button>

  <div class="spacer"></div>

  <button (click)="toggleLogging()">
    <img [ngSrc]="logPaused ? '/icons/play.svg' : '/icons/pause.svg'"
      width="48"
      height="48"
      alt="Play/Pause" />
  </button>

  <div class="spacer"></div>

  <button (click)="togglePosition()">

    <img ngSrc="/icons/swap_horiz.svg"
      width="48"
      height="48"
      alt="Swap Position" />
  </button>

  <div class="spacer"></div>

  <button
    [class.now]="activeRoute === '/settings'"
    [disabled]="activeRoute === '/settings'"
    (click)="go('settings')">

    <img ngSrc="/icons/settings.svg"
      width="48"
      height="48"
      alt="Settings" />
  </button>

  <div class="spacer"></div>

  <button
    [class.now]="activeRoute === '/license'"
    [disabled]="activeRoute === '/license'"
    (click)="go('license')">

    <img ngSrc="/icons/license.svg"
      width="48"
      height="48"
      alt="License" />
  </button>

  <button
    [class.now]="activeRoute === '/about'"
    [disabled]="activeRoute === '/about'"
    (click)="go('about')">

    <img ngSrc="/icons/signpost.svg"
      width="48"
      height="48"
      alt="About" />
  </button>
</div>

<div #panelRef [class]="getPosition() + ' panel'"
  [class.full]="activeMenu === 'filter'">
  <div class="fields">
  @switch (activeMenu) {
    @case ('level') {
    <!-- Filter log levels -->
      <div class="title">Select LOG Level</div>

      <fieldset>
        <legend>Select LOG Level</legend>

        @for (level of logLevels; track level.key) {
          <label class="sp-radio">
            <input type="radio"
              name="logLevel"
              value="level.key"
              [checked]="getLogLevel() == level.value"
              (change)="setLogLevel(level.value)" />

            <span class="icon"></span>

            {{ level.label }}
          </label>
        }
      </fieldset>
    }

    @case ('column') {
      <!-- Filter log columns -->
      <div class="title">Select LOG Level</div>

      <fieldset>
        <legend>Select LOG Columns</legend>

        @for (col of logColumns; track col.key) {
          <label class="sp-checkbox">
            <input type="checkbox"
              name="{{ col.key }}"
              [disabled]="isColumnAlways(col.key)"
              [checked]="isColumnShow(col.key)"
              (change)="toggleColumn(col.key)" />

            <span class="icon"></span>

            {{ col.label }}
          </label>
        }
      </fieldset>
    }

    @case ('filter') {
      <!-- Dynamic filters -->
      <div class="filters">
        <div class="filter">
          <div class="title">ENVIRONMENTS</div>
          <fieldset>
            <legend>ENVIRONMENTS</legend>
            @for (env of collectedFilters(logKeys.ENV); track env) {
              <label class="sp-checkbox">
                <input type="checkbox" name="env-{{ env }}"
                      [checked]="isUserFilter(logKeys.ENV, env)"
                      (change)="toggleFilter(logKeys.ENV, env)" />
                <span class="icon"></span>
                {{  env }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">HOSTS</div>
          <fieldset>
            <legend>HOSTS</legend>
            @for (host of collectedFilters(logKeys.HOST); track host) {
              <label class="sp-checkbox">
                <input type="checkbox" name="host-{{ host }}"
                      [checked]="isUserFilter(logKeys.HOST, host)"
                      (change)="toggleFilter(logKeys.HOST, host)" />
                <span class="icon"></span>
                {{  host }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">SERVICES</div>
          <fieldset>
            <legend>SERVICES</legend>
            @for (service of collectedFilters(logKeys.SERVICE); track service) {
              <label class="sp-checkbox">
                <input type="checkbox" name="svc-{{ service }}"
                      [checked]="isUserFilter(logKeys.HOST, service)"
                      (change)="toggleFilter(logKeys.HOST, service)" />
                <span class="icon"></span>
                {{  service }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">MODULES</div>
          <fieldset>
            <legend>MODULES</legend>
            @for (module of collectedFilters(logKeys.MODULE); track module) {
              <label class="sp-checkbox">
                <input type="checkbox" name="module-{{ module }}"
                      [checked]="isUserFilter(logKeys.MODULE, module)"
                      (change)="toggleFilter(logKeys.MODULE, module)" />
                <span class="icon"></span>
                {{ module }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">PROCESSES</div>
          <fieldset>
            <legend>PROCESSES</legend>
            @for (process of collectedFilters(logKeys.PROCESS); track process) {
              <label class="sp-checkbox">
                <input type="checkbox" name="process-{{ process }}"
                      [checked]="isUserFilter(logKeys.PROCESS, process)"
                      (change)="toggleFilter(logKeys.PROCESS, process)" />
                <span class="icon"></span>
                {{ process }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">THREADS</div>
          <fieldset>
            <legend>THREADS</legend>
            @for (thread of collectedFilters(logKeys.THREAD); track thread) {
              <label class="sp-checkbox">
                <input type="checkbox" name="thread-{{ thread }}"
                      [checked]="isUserFilter(logKeys.THREAD, thread)"
                      (change)="toggleFilter(logKeys.THREAD, thread)" />
                <span class="icon"></span>
                {{ thread }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">TRACES</div>
          <fieldset>
            <legend>TRACES</legend>
            @for (traceId of collectedFilters(logKeys.TRACE_ID); track traceId) {
              <label class="sp-checkbox">
                <input type="checkbox" name="trace-{{ traceId }}"
                      [checked]="isUserFilter(logKeys.TRACE_ID, traceId)"
                      (change)="toggleFilter(logKeys.TRACE_ID, traceId)" />
                <span class="icon"></span>
                {{ traceId }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">SPANS</div>
          <fieldset>
            <legend>SPANS</legend>
            @for (spanId of collectedFilters(logKeys.SPAN_ID); track spanId) {
              <label class="sp-checkbox">
                <input type="checkbox" name="span-{{ spanId }}"
                      [checked]="isUserFilter(logKeys.SPAN_ID, spanId)"
                      (change)="toggleFilter(logKeys.SPAN_ID, spanId)" />
                <span class="icon"></span>
                {{ spanId }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">SEVERITY</div>
          <fieldset>
            <legend>SEVERITY</legend>
            @for (severity of collectedFilters(logKeys.SEVERITY); track severity) {
              <label class="sp-checkbox">
                <input type="checkbox" name="sev-{{ severity }}"
                      [checked]="isUserFilter(logKeys.SEVERITY, severity)"
                      (change)="toggleFilter(logKeys.SEVERITY, severity)" />
                <span class="icon"></span>
                {{ severity }}
              </label>
            }
          </fieldset>
        </div>

        <div class="filter">
          <div class="title">IP</div>
          <fieldset>
            <legend>IP</legend>
              @for (ip of collectedFilters(logKeys.IP); track ip) {
                <label class="sp-checkbox">
                  <input type="checkbox" name="ip-{{ ip }}"
                        [checked]="isUserFilter(logKeys.IP, ip)"
                        (change)="toggleFilter(logKeys.IP, ip)" />
                  <span class="icon"></span>
                  {{ ip }}
                </label>
              }
          </fieldset>
        </div>
      </div>
    }
  }
  </div>
</div>
